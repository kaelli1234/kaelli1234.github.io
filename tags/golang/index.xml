<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>golang on Kael Li</title>
    <link>http://www.lilinjian.com/tags/golang/</link>
    <description>Recent content in golang on Kael Li</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>&lt;a href=&#34;https://creativecommons.org/licenses/by-nc/4.0/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CC BY-NC 4.0&lt;/a&gt;</copyright>
    <lastBuildDate>Sat, 29 Sep 2018 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="http://www.lilinjian.com/tags/golang/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Golang æ‰§è¡Œç³»ç»Ÿå¤–éƒ¨å‘½ä»¤</title>
      <link>http://www.lilinjian.com/posts/2018/09/29/go-exec/</link>
      <pubDate>Sat, 29 Sep 2018 00:00:00 +0000</pubDate>
      
      <guid>http://www.lilinjian.com/posts/2018/09/29/go-exec/</guid>
      <description>æœ€è¿‘åœ¨åšphpæœåŠ¡è¿ç§»ï¼Œé‡åˆ°äº†éœ€è¦è°ƒç”¨ç³»ç»Ÿå¤–éƒ¨å‘½ä»¤(ffmpeg)ï¼Œå¤„ç†è§†é¢‘é¢„è§ˆå›¾çš„æƒ…å†µï¼Œä»¥å‰phpæ˜¯ç›´æ¥æ‰¾äº†è½®å­(php-ffmpeg)è§£å†³çš„ï¼Œä½†æœ¬è´¨å…¶å®ä¹Ÿå°±æ˜¯è°ƒç”¨äº†ç›¸å…³å‡½æ•°æ‰§è¡Œç³»ç»Ÿå¤–éƒ¨çš„å‘½ä»¤ã€‚golangä¹Ÿæœ‰os/execè¿™ä¸ªåŒ…æ”¯æŒï¼Œæ ‡æ³¨ä¸€ä¸‹å¤‡å¿˜ã€‚
1ã€å…¶å®ä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•
func Command(name string, arg ...string) *Cmd func (c *Cmd) Output() ([]byte, error) func (c *Cmd) CombinedOutput() ([]byte, error) é€šè¿‡è°ƒç”¨exec.Command()æ‰§è¡Œç³»ç»Ÿå¤–éƒ¨å‘½ä»¤ï¼Œé€šè¿‡*Cmd.Output()æˆ–è€…*Cmd.CombinedOutput()è·å–æ‰§è¡Œç»“æœè¾“å‡ºã€‚ éœ€è¦æ³¨æ„çš„æ˜¯exec.Command()è¿™ä¸ªæ–¹æ³•çš„ä¼ å‚ã€‚
ä¾‹å¦‚ä¸‹é¢çš„å‘½åï¼šffmpeg -i input.flv -ss 00:00:14.435 -vframes 1 out.png
å¯¹åº”çš„è°ƒç”¨æ–¹å¼æ˜¯ï¼šexec.Command(&amp;quot;ffmpeg&amp;quot;, &amp;quot;-i&amp;quot;, &amp;quot;input.flv&amp;quot;, &amp;quot;-ss&amp;quot;, &amp;quot;00:00:00&amp;quot;, &amp;quot;-vframes&amp;quot;, &amp;quot;1&amp;quot;, &amp;quot;out.png&amp;quot;)
2ã€é’ˆå¯¹1ä¸­æåˆ°çš„æƒ…å†µï¼Œå†™äº†ä¸ªä¾‹å­ã€‚
package main import ( &amp;#34;fmt&amp;#34; &amp;#34;os/exec&amp;#34; &amp;#34;strings&amp;#34; ) func main() { cmd := &amp;#34;/usr/local/bin/ffmpeg&amp;#34; args := &amp;#34;-i %s -ss 00:00:00 -vframes 1 %s&amp;#34; output, err := exec.Command(cmd, strings.Split(fmt.Sprintf(args, &amp;#34;input.flv&amp;#34;, &amp;#34;out.png&amp;#34;), &amp;#34; &amp;#34;).</description>
    </item>
    
    <item>
      <title>Golang mgo ä½¿ç”¨å¿ƒå¾—</title>
      <link>http://www.lilinjian.com/posts/2018/06/29/go-mgo/</link>
      <pubDate>Fri, 29 Jun 2018 00:00:00 +0000</pubDate>
      
      <guid>http://www.lilinjian.com/posts/2018/06/29/go-mgo/</guid>
      <description>æœ€è¿‘åœ¨ä½¿ç”¨mgoçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œæ€»ç»“æ ‡è®°ä¸€ä¸‹ã€‚
1ã€å…³äºmgoçš„è¿æ¥æ± é—®é¢˜ã€‚ç›¸å…³çš„å‡ ä¸ªæ–¹æ³•å¦‚ä¸‹
Dial(url string) (*Session, error) func (*Session) Clone() *Session func (*Session) Copy() *Session ç”¨ä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•å¾—åˆ°çš„Sessionï¼Œä½¿ç”¨å®Œåéœ€è¦Close()ï¼Œå¦‚æœä¸closeçš„è¯ï¼Œè¿æ¥æ± ä¸­çš„sessionä¼šä¸€ç›´å¢åŠ ï¼Œç›´åˆ°é»˜è®¤é…ç½®çš„4096ã€‚ä¹‹åè·å–sessionçš„åç¨‹ä¼šsleepç­‰å¾…ï¼Œç›´åˆ°æœ‰å¯ç”¨çš„sessionã€‚ä¸šåŠ¡ç«¯çš„è¡¨ç°å°±æ˜¯ç¨‹åºæŒ‚æ­»ï¼Œç±»ä¼¼æ­»é”çš„è¡¨ç°ğŸ˜‚ã€‚æ‰€ä»¥sessionç”¨å®Œåä¸€å®šè¦defer closeæ‰ã€‚
2ã€é’ˆå¯¹1ä¸­æåˆ°çš„æƒ…å†µï¼Œå†™äº†ä¸ªæ–¹æ³•è°ƒç”¨mgo Collectionä¸‹å¯¹åº”çš„å‡½æ•°ã€‚
package main import ( &amp;#34;fmt&amp;#34; &amp;#34;gopkg.in/mgo.v2&amp;#34; ) var ( session *mgo.Session ) func Session() *mgo.Session { if session == nil { var err error session, err = mgo.Dial(&amp;#34;root:root@127.0.0.1:27017&amp;#34;) if err != nil { panic(err) } } return session.Clone() } func Magic(database string, collection string, f func(*mgo.Collection) error) error { session := Session() defer func() { if session !</description>
    </item>
    
    <item>
      <title>Golangä¸­çš„JSONå¤„ç†æŠ€å·§</title>
      <link>http://www.lilinjian.com/posts/2017/07/18/go-struct-nil-pointer/</link>
      <pubDate>Tue, 18 Jul 2017 00:00:00 +0000</pubDate>
      
      <guid>http://www.lilinjian.com/posts/2017/07/18/go-struct-nil-pointer/</guid>
      <description>åˆå¥½ä¹…æ²¡æœ‰æ›´æ–°åšå®¢äº†ï¼Œæœ€è¿‘å› ä¸ºé¡¹ç›®éœ€è¦å­¦ä¹ äº†ä¸‹Goè¯­è¨€ï¼Œæ‰çœŸæ­£æ˜ç™½äº†ä¸ºä»€ä¹ˆè¯´PHPæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ğŸ¤£ã€‚è¨€å½’æ­£ä¼ ï¼Œé¦–å…ˆå…ˆæ¨èæœ¬ç§˜ç± build-web-application-with-golang Githubä¸Šçš„é«˜æ˜Ÿé¡¹ç›®ï¼Œä½œè€…åŒæ—¶ä¹Ÿæ˜¯beegoæ¡†æ¶çš„å¼€å‘è€…ï¼Œæœ¬é¡¹ç›®æ˜¯ä½œè€…ä½¿ç”¨Goè¿›è¡ŒWebå¼€å‘çš„ç»éªŒæ€»ç»“ï¼Œæ»¡æ»¡çš„å¹²è´§ã€‚
æ‰€ä»¥åŸºç¡€çš„JSONå¤„ç†å°±ç›´æ¥å‚è€ƒæ–‡æ¡£å§ï¼Œä¸»è¦å†…å®¹å¤§æ¦‚æ˜¯Goä¸­æœ‰ä¸“é—¨çš„JSONåŒ…æ¥å¤„ç†JSONæ•°æ®ï¼Œé€šè¿‡å®šä¹‰å¯¹åº”çš„structï¼Œtagæ˜ å°„å­—æ®µï¼Œå¾ˆæ–¹ä¾¿çš„å¯ä»¥æŠŠJSONæ•°æ®è½¬æˆstructï¼Œæˆ–è€…æŠŠstructè½¬åŒ–æˆJSONå­—ç¬¦ä¸²ã€‚
å…¶ä¸­æ–‡æ¡£ä¸­æœ‰æ®µæè¿°æ˜¯è¿™æ ·çš„ï¼š
 tagä¸­å¦‚æœå¸¦æœ‰&amp;rdquo;omitempty&amp;rdquo;é€‰é¡¹ï¼Œé‚£ä¹ˆå¦‚æœè¯¥å­—æ®µå€¼ä¸ºç©ºï¼Œå°±ä¸ä¼šè¾“å‡ºåˆ°JSONä¸²ä¸­ï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„éœ€æ±‚ï¼Œå½“æŸä¸ªå­—æ®µä¸ºç©ºæ—¶ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è¯¥å­—æ®µä¹Ÿè¾“å‡ºåœ¨JSONå­—ç¬¦ä¸²ä¸­ï¼Œé€šè¿‡åœ¨ç»“æ„ä½“çš„tagä¸­å®šä¹‰omitemptyå°±å¯ä»¥è¾¾åˆ°è¯¥ç›®çš„ã€‚
 type DataAttachment struct { Id string `json:&amp;#34;id,omitempty&amp;#34;` Head DataAttachmentHead `json:&amp;#34;head,omitempty&amp;#34;` Body DataAttachmentBody `json:&amp;#34;body,omitempty&amp;#34;` } type DataAttachmentHead struct { Text string `json:&amp;#34;text,omitempty&amp;#34;` Bgcolor string `json:&amp;#34;bgcolor,omitempty&amp;#34;` Tcolor string `json:&amp;#34;tcolor,omitempty&amp;#34;` } type DataAttachmentBody struct { Title string `json:&amp;#34;title,omitempty&amp;#34;` Image string `json:&amp;#34;image,omitempty&amp;#34;` Content string `json:&amp;#34;content,omitempty&amp;#34;` } ä»¥ä¸ŠDataAttachmentè¿™ä¸ªç»“æ„ï¼Œé€šè¿‡å¯¹headï¼Œbodyå®šä¹‰omitemptyé€‰é¡¹ï¼Œæˆ‘ä»¬é¢„æœŸæ˜¯å¸Œæœ›å¦‚æœå½“headï¼Œbodyä¸ºç©ºæ—¶ï¼Œå¯ä»¥ä¸è¾“å‡ºè¿™2ä¸ªå­—æ®µåˆ°JSONä¸­ã€‚ä½†æ˜¯äº‹å®ä¸Šå´å’Œæˆ‘ä»¬é¢„æœŸçš„æœ‰æ‰€å·®å¼‚ï¼Œæˆ‘ä»¬é€šè¿‡json.Marshalå¾—åˆ°çš„JSONä¸­è¿˜æ˜¯ä¼šæœ‰ç©ºçš„headå’Œbodyã€‚
æ‰€ä»¥æˆ‘ä»¬è¦æ€æ ·æ‰èƒ½å®ç°æˆ‘ä»¬çš„ç›®çš„å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œä¼ æŒ‡é’ˆ
type DataAttachment struct { Id string `json:&amp;#34;id,omitempty&amp;#34;` Head *DataAttachmentHead `json:&amp;#34;head,omitempty&amp;#34;` Body *DataAttachmentBody `json:&amp;#34;body,omitempty&amp;#34;` } å‚è€ƒ
 https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/07.2.md build-web-application-with-golang https://stackoverflow.</description>
    </item>
    
  </channel>
</rss>